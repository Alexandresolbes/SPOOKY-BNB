<div class ="container w-75 p-5 grey-bg rounded-4">
  <h1><%= @listing.title %></h1>





<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
     <%= cl_image_tag @listing.photos.first.key, class:"d-block w-100" %>
    </div>
    <div class="carousel-item">

        <%= cl_image_tag @listing.photos.last.key, class:"d-block w-100" %>
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

  <div class="my-3">
    <h5><strong>👻 Description</strong></h5>
    <p><%= @listing.description %></p>
  <hr>
    <h5><strong>📍 Address</strong></h5>
    <p><%= @listing.address %></p>
    <p><%= @listing.description %></p>
  <hr>
    <h5><strong>💲Price</strong></h5>
    <p><%= @listing.price_per_night %> / Night</p>
    <p><%= @listing.description %></p>
  <hr>
    <h5><strong>🧑🏻‍🤝‍🧑🏻Number of Guests</strong></h5>
    <p><%= @listing.max_guests %></p>
    <p><%= @listing.description %></p>
  <hr>
    <h5><strong>Listing presented by this host</strong></h5>
    <%= cl_image_tag @listing.user.photo.key, height:100, width:100, class:"sm-avatar ms-2" %>
    <p><%= @listing.user.first_name.capitalize %></p>
  </div>

  <h5 class="mt-3"><strong>Listing on Map</strong></h5>
  <div style="width: 100%; height: 300px;"
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

  <div class="my-5">
  <%= link_to 'Back', listings_path, class:"btn btn-outline-light" %>

  <% if policy(@listing).edit? %>
    <%= link_to 'Delete', listing_path(@listing), data: { turbo_method: :delete, turbo_confirm: 'Sure ?' }, class:"btn btn-danger text-light" %>
    <%= link_to 'Update Listing', edit_listing_path(@listing), class:"btn btn-warning text-light" %>
  <% else %>
    <%= link_to 'Book Listing', new_listing_booking_path(@listing), class: "btn btn-primary" %>
  <% end %>

  </div>
</div>
